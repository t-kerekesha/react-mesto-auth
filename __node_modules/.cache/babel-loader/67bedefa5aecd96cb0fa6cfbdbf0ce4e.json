{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kti\\\\dev\\\\mesto-react\\\\src\\\\components\\\\Card.js\";\nimport React from \"react\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport Tooltip from \"./Tooltip\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nclass Card extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleCardClick = this.handleCardClick.bind(this);\n    this.handleLikeClick = this.handleLikeClick.bind(this);\n    this.openTooltip = this.openTooltip.bind(this);\n    this.closeTooltip = this.closeTooltip.bind(this);\n    this.state = {\n      like: false,\n      isOpenTooltip: false,\n      likes: [],\n      positionTooltip: {}\n    };\n  }\n  handleCardClick(card) {\n    this.props.onCardClick(card);\n  }\n  handleLikeClick(card) {\n    this.props.onCardLike(card);\n    // console.log(card)\n  }\n\n  openTooltip(_ref) {\n    let {\n      likes,\n      top,\n      left\n    } = _ref;\n    this.setState({\n      isOpenTooltip: true,\n      likes: likes,\n      positionTooltip: {\n        top: top,\n        left: left\n      }\n    });\n  }\n  closeTooltip() {\n    this.setState({\n      isOpenTooltip: false\n    });\n  }\n  render() {\n    const isOwn = this.props.card.owner._id === this.context._id;\n    const cardDeleteButtonClassName = `card__delete-button  button ${isOwn && 'card__delete-button_visible'}`;\n    const isLiked = this.props.card.likes.some(i => i._id === this.context._id);\n    const cardLikeButtonClassName = `card__like-button ${isLiked && \"card__like-button_active\"}`;\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"gallery__list-item\",\n        children: /*#__PURE__*/_jsxDEV(\"figure\", {\n          className: \"card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card__aspect-ratio\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: this.props.card.link,\n              className: \"card__image\",\n              alt: this.props.card.name,\n              onClick: () => {\n                this.handleCardClick(this.props.card);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: cardDeleteButtonClassName,\n            type: \"button\",\n            \"aria-label\": \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"figcaption\", {\n            className: \"card__container-caption\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"card__caption\",\n              children: this.props.card.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"card__like-button\",\n              type: \"button\",\n              \"aria-label\": \"\\u041B\\u0430\\u0439\\u043A\",\n              onClick: () => {\n                this.handleLikeClick(this.props.card);\n              },\n              onMouseEnter: event => {\n                if (this.props.card.likes.length > 0) {\n                  this.openTooltip({\n                    likes: this.props.card.likes,\n                    top: event.pageY,\n                    left: event.pageX\n                  });\n                }\n              },\n              onMouseLeave: this.closeTooltip\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"card__like-counter\",\n              children: this.props.card.likes.length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n        isOpen: this.state.isOpenTooltip,\n        likes: this.state.likes,\n        position: this.state.positionTooltip\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true);\n  }\n}\nCard.contextType = CurrentUserContext;\nexport default Card;","map":{"version":3,"names":["React","CurrentUserContext","Tooltip","Card","Component","constructor","props","handleCardClick","bind","handleLikeClick","openTooltip","closeTooltip","state","like","isOpenTooltip","likes","positionTooltip","card","onCardClick","onCardLike","top","left","setState","render","isOwn","owner","_id","context","cardDeleteButtonClassName","isLiked","some","i","cardLikeButtonClassName","link","name","event","length","pageY","pageX","contextType"],"sources":["C:/Users/kti/dev/mesto-react/src/components/Card.js"],"sourcesContent":["import React from \"react\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport Tooltip from \"./Tooltip\";\n\nclass Card extends React.Component {\n  static contextType = CurrentUserContext;\n  constructor(props) {\n    super(props);\n    this.handleCardClick = this.handleCardClick.bind(this);\n    this.handleLikeClick = this.handleLikeClick.bind(this);\n    this.openTooltip = this.openTooltip.bind(this);\n    this.closeTooltip = this.closeTooltip.bind(this);\n    this.state = {\n      like: false,\n      isOpenTooltip: false,\n      likes: [],\n      positionTooltip: {}\n    };\n  }\n\n  handleCardClick(card) {\n    this.props.onCardClick(card);\n  }\n\n  handleLikeClick(card) {\n    this.props.onCardLike(card);\n    // console.log(card)\n  }\n\n  openTooltip({ likes, top, left }) {\n    this.setState({\n      isOpenTooltip: true,\n      likes: likes,\n      positionTooltip: {\n        top: top,\n        left: left\n      }\n    });\n  }\n\n  closeTooltip() {\n    this.setState({ isOpenTooltip: false });\n  }\n\n  render() {\n    const isOwn = this.props.card.owner._id === this.context._id;\n    const cardDeleteButtonClassName = (\n      `card__delete-button  button ${isOwn && 'card__delete-button_visible'}`\n    );\n\n    const isLiked = this.props.card.likes.some(i => i._id === this.context._id);\n    const cardLikeButtonClassName = (\n      `card__like-button ${isLiked && \"card__like-button_active\"}`\n    );\n\n    return (\n      <>\n        <li className=\"gallery__list-item\">\n          <figure className=\"card\">\n            <div className=\"card__aspect-ratio\">\n              <img src={this.props.card.link}\n                className=\"card__image\"\n                alt={this.props.card.name}\n                onClick={() => {\n                  this.handleCardClick(this.props.card);\n                }}\n              />\n            </div>\n            <button className={cardDeleteButtonClassName}\n              type=\"button\"\n              aria-label=\"Удалить\">\n            </button>\n            <figcaption className=\"card__container-caption\">\n              <h2 className=\"card__caption\">\n                {this.props.card.name}\n              </h2>\n              <button className=\"card__like-button\"\n                type=\"button\"\n                aria-label=\"Лайк\"\n                onClick={() => {\n                  this.handleLikeClick(this.props.card);\n                }}\n                onMouseEnter={(event) => {\n                  if(this.props.card.likes.length > 0) {\n                    this.openTooltip({\n                      likes: this.props.card.likes,\n                      top: event.pageY,\n                      left: event.pageX\n                    })\n                  }\n                }}\n                onMouseLeave={this.closeTooltip} >\n              </button>\n              <p className=\"card__like-counter\">\n                {this.props.card.likes.length}\n              </p>\n            </figcaption>\n          </figure>\n        </li>\n\n      <Tooltip\n        isOpen={this.state.isOpenTooltip}\n        likes={this.state.likes}\n        position={this.state.positionTooltip} />\n    </>\n    );\n  }\n}\n\nexport default Card;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}