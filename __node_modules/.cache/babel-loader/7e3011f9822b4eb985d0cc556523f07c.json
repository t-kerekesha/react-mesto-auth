{"ast":null,"code":"import _classCallCheck from\"C:/Users/kti/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/kti/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/createClass.js\";var Api=/*#__PURE__*/function(){function Api(_ref){var baseUrl=_ref.baseUrl,headers=_ref.headers;_classCallCheck(this,Api);this._baseUrl=baseUrl;this._headers=headers;}_createClass(Api,[{key:\"getAllInfo\",value:function getAllInfo(){return Promise.all([this.getUserInfo(),this.getInitialCards()]);}},{key:\"getUserInfo\",value:function getUserInfo(){var _this=this;return fetch(this._baseUrl+'/users/me',{headers:this._headers}).then(function(response){return _this._checkResponse(response);});}},{key:\"getInitialCards\",value:function getInitialCards(){var _this2=this;return fetch(this._baseUrl+'/cards',{headers:this._headers}).then(function(response){return _this2._checkResponse(response);});}},{key:\"editUserInfo\",value:function editUserInfo(_ref2){var _this3=this;var name=_ref2.name,about=_ref2.about;return fetch(this._baseUrl+'/users/me',{method:'PATCH',headers:this._headers,body:JSON.stringify({name:name,about:about})}).then(function(response){return _this3._checkResponse(response);});}},{key:\"editUserAvatar\",value:function editUserAvatar(linkAvatar){var _this4=this;return fetch(this._baseUrl+'/users/me/avatar',{method:'PATCH',headers:this._headers,body:JSON.stringify({avatar:linkAvatar})}).then(function(response){return _this4._checkResponse(response);});}},{key:\"addNewCard\",value:function addNewCard(_ref3){var _this5=this;var name=_ref3.name,link=_ref3.link;return fetch(this._baseUrl+'/cards',{method:'POST',headers:this._headers,body:JSON.stringify({name:name,link:link})}).then(function(response){return _this5._checkResponse(response);});}},{key:\"deleteCard\",value:function deleteCard(cardId){var _this6=this;return fetch(this._baseUrl+'/cards/'+cardId,{method:'DELETE',headers:this._headers}).then(function(response){return _this6._checkResponse(response);});}},{key:\"likeCard\",value:function likeCard(cardId,like){var _this7=this;var method=like?'PUT':'DELETE';return fetch(this._baseUrl+'/cards/'+cardId+'/likes',{method:method,headers:this._headers}).then(function(response){return _this7._checkResponse(response);});}},{key:\"_checkResponse\",value:function _checkResponse(response){if(response.ok){return response.json();}else{return Promise.reject({message:\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(response.status)});}}}]);return Api;}();var api=new Api({baseUrl:'https://nomoreparties.co/v1/cohort-51',headers:{authorization:'9e7255a8-14b6-4bc0-9fe9-419fec94bcd2','Content-Type':'application/json'}});export default api;","map":{"version":3,"names":["Api","baseUrl","headers","_baseUrl","_headers","Promise","all","getUserInfo","getInitialCards","fetch","then","response","_checkResponse","name","about","method","body","JSON","stringify","linkAvatar","avatar","link","cardId","like","ok","json","reject","message","status","api","authorization"],"sources":["C:/Users/kti/dev/mesto-react/src/utils/Api.js"],"sourcesContent":["class Api {\n  constructor({ baseUrl, headers }) {\n    this._baseUrl = baseUrl;\n    this._headers = headers;\n  }\n\n  getAllInfo() {\n    return Promise.all([ this.getUserInfo(), this.getInitialCards() ]);\n  }\n\n  getUserInfo() {\n    return fetch((this._baseUrl + '/users/me'), {\n      headers: this._headers\n    })\n    .then((response) => {\n      return this._checkResponse(response);\n    });\n  }\n\n  getInitialCards() {\n    return fetch((this._baseUrl + '/cards'), {\n      headers: this._headers\n    })\n    .then((response) => {\n      return this._checkResponse(response);\n    });\n  }\n\n  editUserInfo({ name, about }) {\n    return fetch((this._baseUrl + '/users/me'), {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: name,\n        about: about\n      })\n    })\n    .then((response) => {\n      return this._checkResponse(response);\n    });\n  }\n\n  editUserAvatar(linkAvatar) {\n    return fetch((this._baseUrl + '/users/me/avatar'), {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        avatar: linkAvatar\n      })\n    })\n    .then((response) => {\n      return this._checkResponse(response);\n    });\n  }\n\n  addNewCard({ name, link }) {\n    return fetch((this._baseUrl + '/cards'), {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: name,\n        link: link\n      })\n    })\n    .then((response) => {\n      return this._checkResponse(response);\n    });\n  }\n\n  deleteCard(cardId) {\n    return fetch((this._baseUrl + '/cards/' + cardId), {\n      method: 'DELETE',\n      headers: this._headers\n    })\n    .then((response) => {\n      return this._checkResponse(response);\n    });\n  }\n\n  likeCard(cardId, like) {\n    const method = (like)? 'PUT' : 'DELETE';\n    return fetch((this._baseUrl + '/cards/' + cardId + '/likes'), {\n      method: method,\n      headers: this._headers\n    })\n    .then((response) => {\n      return this._checkResponse(response);\n    });\n  }\n\n  _checkResponse(response) {\n    if(response.ok) {\n      return response.json();\n    } else {\n      return Promise.reject({ message: `Ошибка: ${response.status}` });\n    }\n  }\n}\n\nconst api = new Api({\n  baseUrl: 'https://nomoreparties.co/v1/cohort-51',\n  headers: {\n    authorization: '9e7255a8-14b6-4bc0-9fe9-419fec94bcd2',\n    'Content-Type': 'application/json'\n  }\n});\n\nexport default api;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}